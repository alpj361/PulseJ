[build]
  command = "npm run build"
  publish = "dist"
  functions = "netlify/functions"

# Development configuration
[dev]
  command = "npm run dev"  # Explicitly tell Netlify which command to run
  port = 3000             # Port to use for the dev server
  targetPort = 5173       # Vite's default port that Netlify should proxy to
  autoLaunch = true       # Open browser automatically

# Production environment settings
[context.production.environment]
  # URL para ejemplos de tendencias
  VITE_VPS_API_URL = "https://jsonplaceholder.typicode.com"
  # URL para tendencias en la función serverless
  VPS_API_URL = "https://jsonplaceholder.typicode.com/posts"
  # OPENROUTER_API_KEY should be set in Netlify environment variables, not here

# Development environment settings (for branch deploys)
[context.branch-deploy.environment]
  VITE_VPS_API_URL = "https://jsonplaceholder.typicode.com"
  VPS_API_URL = "https://jsonplaceholder.typicode.com/posts"

# Function configuration
[functions]
  node_bundler = "esbuild"
  external_node_modules = ["node-fetch"]

# Runtime configuration - Node.js 18
[build.environment]
  NODE_VERSION = "18"

# Función específica
[[redirects]]
  from = "/api/processTrends*"
  to = "/.netlify/functions/processTrends/:splat"
  status = 200
  force = true 